---
layout: post
title: "í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ í•¨ìˆ˜ëª… ì–»ê¸°"
description:
img_path: "/assets/img"
image:
  path: "java.png"
  alt: "Java Logo"
pin: false
categories:
  - Java
  - tips
tags:
  - java
date: 2023-11-03 16:37 +0900
---

Javaì—ì„œ ì‹¤í–‰ì¤‘ì¸ í•¨ìˆ˜ëª…ì„ ì–»ëŠ” ì—¬ëŸ¬ ë°©ë²•ì„ ë¹„êµí•˜ê³  ì†Œê°œí•©ë‹ˆë‹¤.
ê°ê°ì˜ ë°©ë²•ì€ ì¥ë‹¨ì ì´ ìˆìœ¼ë‹ˆ, ìƒí™©ì— ë”°ë¼ ì•Œë§ê²Œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•©ë‹ˆë‹¤.

**ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.**

- **ìœ ì—°í•¨**ì„ ì›í•˜ë©´ **StackTrace**ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
- **ê°„ë‹¨í•¨ê³¼ ì†ë„**ë¥¼ ì›í•˜ë©´ **Reflection**ì„ ì‚¬ìš©í•˜ì„¸ìš”.

{: .prompt-warning}

> **ë²¤ì¹˜ë§ˆí‚¹ í™˜ê²½**<br/> **Java17 correto** í™˜ê²½ì—ì„œ **100ë²ˆì˜ ì›Œë°ì—…**ê³¼ **10000ë²ˆì˜ ë°˜ë³µ**ì„ í†µí•´ ì¶”ì´ë¥¼ ê´€ì°°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ë§ˆì´í¬ë¡œë²¤ì¹˜ë§ˆí‚¹ì€ ëŒ€ë¶€ë¶„ í° ì˜ë¯¸ê°€ ì—†ìœ¼ë©° ìƒí™©ê³¼ ì‚¬ìš©ì‚¬ë¡€ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒì„ ì´í•´í•´ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

## ğŸ“š 1. StackTrace ì‚¬ìš©

---

StackTrace ë°©ì‹ì€ Call Stack ì„ ì¶”ì í•˜ê¸° ë•Œë¬¸ì—, ë‹¨ìˆœíˆ í•´ë‹¹ Methodë§Œ ì–»ëŠ” ê²ƒ ì´ìƒì˜ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì˜ˆë¥¼ë“¤ì–´, í•¨ìˆ˜ì´ë¦„ êµ¬í•˜ëŠ” ê¸°ëŠ¥ì„ Util Classì— static Method í˜•ì‹ìœ¼ë¡œ ì •ì˜í•˜ê±°ë‚˜, íŠ¹ì • Annotationì´ ë¶™ì€ ì œì¼ ê°€ê¹Œìš´ ë©”ì„œë“œë¥¼ ì°¾ëŠ” ë“±ì˜ ì‘ì—…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ëŒ€ì‹  Reflectionì— ë¹„í•´ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•©ë‹ˆë‹¤. í•˜ì§€ë§Œ StackWalker(java9+)ë¥¼ ì‚¬ìš©í•˜ë©´ 2~3ë°°ë¡œ ê·¸ ì°¨ì´ê°€ í¬ì§€ ì•ŠìŠµë‹ˆë‹¤.

**ì£¼ì˜í•  ì ì´ ìˆìŠµë‹ˆë‹¤.** ì¼ë¶€ VMì€ ì„±ëŠ¥ìµœì í™”ë¥¼ ìœ„í•´ ìŠ¤íƒì¶”ì ì—ì„œ ëª‡ëª‡ í”„ë ˆì„ì„ ìƒëµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ìµœì í™”ëŠ” ëŸ°íƒ€ì„ ì¤‘ ì ì§„ì ìœ¼ë¡œ ì¼ì–´ë‚˜ë©° ì˜ˆì¸¡í•˜ê¸° ë§¤ìš° ì–´ë µìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œ ë¬¸ì œê°€ ë  ì¼ì€ ê±°ì˜ ì—†ìœ¼ë‚˜, ì´ëŸ° ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ ë¶„ëª…íˆ ì¸ì§€í•˜ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

### ğŸŒŸ 1-1. StackWalker(java9+) ì‚¬ìš©

---

> **Java9+ì—ì„œ StackTraceë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ì„¸ìš”.**

**ë‹¤ë¥¸ StackTrace ë°©ë²•ì— ë¹„í•´ ì›”ë“±í•œ ì¥ì ì„ ê°€ì§‘ë‹ˆë‹¤.**

1. **ê°€ì¥ ë¹ ë¥´ê³  ì˜¤ë²„í—¤ë“œê°€ ì ìŠµë‹ˆë‹¤.** ì²˜ìŒë¶€í„° ëª¨ë“  Stackì„ ì¶”ì í•˜ì§€ ì•Šê³ , í•„ìš”í•œ ì‹œì ì—ì„œ íƒìƒ‰í•˜ëŠ” Lazyë°©ì‹ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì„±ëŠ¥ì°¨ì´ê°€ ì‹¬í•˜ë©°, Call Stackì´ ê¹Šì–´ì§ˆìˆ˜ë¡ ê·¸ ì°¨ì´ëŠ” ë” ì‹¬í•´ì§‘ë‹ˆë‹¤.
2. **ë‹¤ì–‘í•œ í¸ì˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.** Call Stack ìŠ¤í‚µ, í•„í„°ë§, ë§¤í•‘ ë“± ë‹¤ì–‘í•œ Stream APIë“¤ê³¼ í•¨ê»˜ ìœ ì—°í•œ ì‘ì—… ì •ì˜ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
3. `walk()`ëŠ” **`Optional`ì„ ë°˜í™˜í•©ë‹ˆë‹¤.** Nullì²˜ë¦¬ê°€ í¸í•´ì§‘ë‹ˆë‹¤.

```java
StackWalker stackWalker = StackWalker.getInstance();
StackFrame stackFrame = stackWalker.walk(stream -> stream
                .skip(0)
                .filter(frame -> {
                    // do some filter...
                    return true;
                })
                .findFirst())
                .get();

String methodName = stackFrame.getMethodName();
```

`StackWalker.getInstance()`ì€ `Option`ì„ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ `Reflection Class`ì˜ `invoke`ë¥¼ ìŠ¤í‚µí•˜ëŠ” ë“± ì„¬ì„¸í•œ íŠœë‹ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### 1-2. Thread ì‚¬ìš©

---

**Java8 ì´í•˜ë²„ì „ì—ì„œ ê³ ë ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.** Threadì—ì„œ ì§ì ‘ stackTraceë¥¼ êµ¬í•©ë‹ˆë‹¤. í•­ìƒ ëª¨ë“  StackTraceë¥¼ êµ¬í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤.

```java
String methodName = Thread.currentThread().getStackTrace()[1].getMethodName();
```

### 1-3. Exception ì‚¬ìš©

---

**java8 ë¯¸ë§Œ ë²„ì „ì—ì„œ Thread ì‚¬ìš©ë³´ë‹¤ ë¹ ë¥´ë‹¤ëŠ” ì •ë³´ê°€ ìˆìŠµë‹ˆë‹¤.** í•˜ì§€ë§Œ java8+ì—ì„œëŠ” í•´ë‹¹ë¬¸ì œê°€ ê°œì„ ë˜ì–´ ì‚¬ìš©í•  ì´ìœ ê°€ ì—†ìŠµë‹ˆë‹¤.

```java
String methodName = new Throwable().getStackTrace()[0].getMethodName();
```

## ğŸ” 2. Reflection ì‚¬ìš©

---

**ê°€ì¥ ê°„ë‹¨í•˜ê³  ë¹ ë¥¸ ë°©ë²•ì…ë‹ˆë‹¤.** í•˜ì§€ë§Œ ìµëª…ê°ì²´ë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ í•¨ìˆ˜ì— í•œì •ëœ ì •ë³´ë§Œ ì‚¬ìš©ê°€ëŠ¥í•©ë‹ˆë‹¤.

ëŸ°íƒ€ì„ì—ì„œ ìµëª…ê°ì²´ì™€ Reflectionì„ ì´ìš©í•©ë‹ˆë‹¤.

```java
String methodName = new Object() {}
                      .getClass().getEnclosingMethod().getName();
```

## References

---

- https://stackoverflow.com/questions/442747/getting-the-name-of-the-currently-executing-method
- https://openjdk.org/jeps/259
- https://www.baeldung.com/java-name-of-executing-method
