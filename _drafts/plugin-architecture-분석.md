---
layout: post
title: Plugin Architecture 분석
description:
img_path: "/assets/img"
image:
  lqip:
  path:
  alt:
pin: false
categories: [Architecture]
tags:
---

![](https://velog.velcdn.com/images/botrunner/post/9a095600-9bfb-403b-899a-b2400052b0fa/image.jpg)

> _**"Perfect software does not exist."** - Andy Hunt_

# ✨0. 개요

---

프로그램을 제작할 때, 모든 UseCase 를 담을 수는 없다.
그래서 많은 프로그램들은 **사용자가 직접 작성 가능한 확장포인트**를 열어놓았다.

- **vscode**, **eclipse** 등의 `extension` 은 매우 유명하다.
- **Excel**같이 친숙한 프로그램도 `Mecro`, `Add-ins` 기능을 제공한다.

<br>

이런 여러가지 확장방식 중 **Plugin 방식**은 **프로그램 외부에 존재하는 코드**가 **프로그램을 확장**할 수 있게 하는 구조이다.

일반적으로 프로그램에 새로운 기능을 추가하려면 **소스코드를 수정 후 재컴파일**해야 한다.
그러나 **Plugin**을 염두에 두고 설계했다면 **재컴파일 없이 외부에서 무한히 확장**할 수 있다.

이번 포스팅에서는 **vscode extension**과 같은 **plugin system**에 대해 설명한다.

# ⚡1. Plugin Architecture 특징

---

> 기본적으로 **외부코드를 동적로딩**하는 구조를 가진다.

사진추가!!!!!!!!

동적로딩 방식 추가!!!!!!!!!!!!!!!(데탑, 일렉트론)

**동적로딩** 특성에 의해 아래 장단점들이 생기게 된다.

## ✔️ 1-1. 장점

- **프로그램 확장(기능추가)**이 쉬워진다.
- 플러그인 단위로 모듈화되어, **개발 및 유지보수**가 쉬워진다.
- 사용자가 사용할 기능만 선택하여 **프로그램 커스터마이징** 가능하다.
- **동적로딩**을 통해 실행되므로, 프로그램 실행중에도 추가하거나 제거할 수 있다.

> 사실 제일 중요한 것은 **사용자 커뮤니티(생태계) 구축**에 있다고 개인적으로 생각한다.
> 이는 프로그램에 대한 **애정과 충성심**으로 이어지기 때문에, 항상 염두에 두고 설계해야 할 것이다.

## ❗ 1-2. 단점

- 외부코드를 실행하므로 **보안위험**이 존재한다.
- 대상 프로그램에 **적절하게 설계**되지 않으면 여러가지 문제가 발생한다.
  - 원하는 기능을 추가하지 못할 수 있다.
  - 구조가 너무 복잡해질 수 있다.
  - 성능저하가 발생할 수 있다.

> **기존 제품들은 보안 위협에 대해 어떤 정책을 사용하고 있을까?**
>
> - vscode의 경우 ㅇㅇ 한다.
> - chrome extension 의 경우 ㅇㅇ 한다.

# 2. Plugin Architecture 구조

---

대략적인 구조는 ~ 와 같다.
이를 위해서 인터페이스를 정의한다.

프로그램은 확장포인트를 열어놓는다.
인터페이스를 사용한다.
IoC를 사용한다는 뜻이다.

## 2-1. chrome extension 사례

## 2-2. vscode 사례

docs 사진 및 링크...

vscode는 기본적으로 script 를 사용하도록 구현되어있다. view는 webView를 통한 script로 쓴다. 마치 Swing 느낌...

폴더 캡쳐사진...

C:/Users/user/?/.vscode/extensions 폴더 안에 설치된 ㅇㅇ 소스코드들과 packaging용 메타파일들을 볼 수 있다.

js는 기본적으로 script 이기 때문에, 추가적인 조치 없이 동적으로 실행하는것이 가능한 것이다!

# 마치며...

---

사실 근본적인 아이디어에 집중해야 한다.

포스팅을 읽으면서 느꼈는지 모르겠지만, OOP, design pattern, IoC 등의 개념 및 접근방식이 녹아있는 것을 알 수 있다.

Spring Framework, MSA 같은 개념들도 사실 근본아이디어는 같다.
확장가능하고 유연한 ~~ 만들기 위해.

Plugin 방식은 그 중 확장모듈을 사용하는 방법인 것이다.

항상 정답은 없다. 장단점을 보고, 꼭 필요한지? 다시 한번 스스로 물어보도록 하자. 현명한 선택을 하도록 하자.

# References
